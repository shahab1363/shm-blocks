!function(){"use strict";const t=".wp-block-shm-poster",e="is-touched",n="is-focused";let i=null,o=!1,s=!1,c=0,r=0;function a(t,e){t&&t.setAttribute("aria-expanded",e?"true":"false")}function u(){i&&(i.classList.remove(e),a(i,!1),i=null,o=!1)}function d(t){if(t.hasAttribute("data-touch-initialized"))return;t.setAttribute("data-touch-initialized","true"),a(t,!1);const d=t.querySelector(".shm-poster__link"),l=function(t){if(!t)return!1;const e=t.getAttribute("href");return e&&"#"!==e&&!t.hasAttribute("data-no-link")}(d);t.addEventListener("touchstart",function(t){const e=t.touches[0];c=e.clientX,r=e.clientY},{passive:!0}),t.addEventListener("touchend",function(n){const f=n.changedTouches[0],h=Math.abs(f.clientX-c),v=Math.abs(f.clientY-r);h>10||v>10||(i!==t?(n.preventDefault(),u(),t.classList.add(e),a(t,!0),i=t,o=!1):l&&!s&&(o?(n.preventDefault(),setTimeout(function(){!function(t){if(s)return;const e=t.getAttribute("href");if(e&&"#"!==e){s=!0;try{"_blank"===t.getAttribute("target")&&window.open(e,"_blank","noopener,noreferrer")||(window.location.href=e)}catch(t){console.error("[SHM Blocks] Navigation failed:",t),s=!1}}}(d)},100)):o=!0))},{passive:!1}),d&&(d.addEventListener("focus",function(){t.classList.add(n),a(t,!0)}),d.addEventListener("blur",function(){t.classList.remove(n),i!==t&&a(t,!1)}),d.addEventListener("keydown",function(t){" "===t.key&&(t.preventDefault(),d.click())}))}function l(){("ontouchstart"in window||navigator.maxTouchPoints>0)&&document.querySelectorAll(t).forEach(d)}function f(){l(),document.addEventListener("touchstart",function(t){i&&!i.contains(t.target)&&u()},{passive:!0}),"undefined"!=typeof MutationObserver&&document.body&&new MutationObserver(function(e){for(const n of e)for(const e of n.addedNodes)if(1===e.nodeType&&(e.classList?.contains("wp-block-shm-poster")||e.querySelector?.(t)))return void l()}).observe(document.body,{childList:!0,subtree:!0})}document.addEventListener("visibilitychange",function(){"visible"===document.visibilityState&&(s=!1)}),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",f):f()}();