!function(){"use strict";const t=".wp-block-shm-poster",e="is-touched",n="is-focused";let o=null,i=!1,r=!1;function s(t,e){t&&t.setAttribute("aria-expanded",e?"true":"false")}function c(){o&&(o.classList.remove(e),s(o,!1),o=null,i=!1)}function u(t){if(t.hasAttribute("data-touch-initialized"))return;t.setAttribute("data-touch-initialized","true"),s(t,!1);const u=t.querySelector(".shm-poster__link"),a=function(t){if(!t)return!1;const e=t.getAttribute("href");return e&&"#"!==e&&!t.hasAttribute("data-no-link")}(u);t.addEventListener("touchstart",function(n){o!==t&&(n.preventDefault(),c(),t.classList.add(e),s(t,!0),o=t,i=!1)},{passive:!1}),t.addEventListener("touchend",function(e){o===t&&a&&!r&&(i?(e.preventDefault(),setTimeout(function(){!function(t){if(r)return;const e=t.getAttribute("href");if(e&&"#"!==e){r=!0;try{"_blank"===t.getAttribute("target")&&window.open(e,"_blank","noopener,noreferrer")||(window.location.href=e)}catch(t){console.error("[SHM Blocks] Navigation failed:",t),r=!1}}}(u)},100)):i=!0)}),u&&(u.addEventListener("focus",function(){t.classList.add(n),s(t,!0)}),u.addEventListener("blur",function(){t.classList.remove(n),o!==t&&s(t,!1)}),u.addEventListener("keydown",function(t){" "===t.key&&(t.preventDefault(),u.click())}))}function a(){("ontouchstart"in window||navigator.maxTouchPoints>0)&&document.querySelectorAll(t).forEach(u)}function d(){a(),document.addEventListener("touchstart",function(t){o&&!o.contains(t.target)&&c()},{passive:!0}),"undefined"!=typeof MutationObserver&&document.body&&new MutationObserver(function(e){for(const n of e)for(const e of n.addedNodes)if(1===e.nodeType&&(e.classList?.contains("wp-block-shm-poster")||e.querySelector?.(t)))return void a()}).observe(document.body,{childList:!0,subtree:!0})}document.addEventListener("visibilitychange",function(){"visible"===document.visibilityState&&(r=!1)}),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",d):d()}();