(()=>{"use strict";var e,l={62(){const e=window.wp.blocks,l=window.wp.i18n,t=window.wp.blockEditor,o=window.wp.components,n=window.wp.element,s=window.wp.primitives,a=window.ReactJSXRuntime;var i=(0,a.jsx)(s.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)(s.Path,{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5 4.5h14c.3 0 .5.2.5.5v8.4l-3-2.9c-.3-.3-.8-.3-1 0L11.9 14 9 12c-.3-.2-.6-.2-.8 0l-3.6 2.6V5c-.1-.3.1-.5.4-.5zm14 15H5c-.3 0-.5-.2-.5-.5v-2.4l4.1-3 3 1.9c.3.2.7.2.9-.1L16 12l3.5 3.4V19c0 .3-.2.5-.5.5z"})}),r=(0,a.jsx)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,a.jsx)(s.Path,{d:"M10 17.389H8.444A5.194 5.194 0 1 1 8.444 7H10v1.5H8.444a3.694 3.694 0 0 0 0 7.389H10v1.5ZM14 7h1.556a5.194 5.194 0 0 1 0 10.39H14v-1.5h1.556a3.694 3.694 0 0 0 0-7.39H14V7Zm-4.5 6h5v-1.5h-5V13Z"})});const c="undefined"!=typeof process&&!1;function m(e){c&&console.warn(`[SHM Blocks] ${e}`)}const h=/^-?[\d.]+(%|px|em|rem|vh|vw|vmin|vmax|ch|ex)$/,p=["ease","ease-in","ease-out","ease-in-out","linear"],d=/^\d+\/\d+$/,u=/^#[0-9A-Fa-f]{3}$|^#[0-9A-Fa-f]{6}$|^rgba?\(\s*\d+\s*,\s*\d+\s*,\s*\d+/;function v(e,l){if(!e||"string"!=typeof e)return l;const t=e.trim();return h.test(t)||"auto"===t||"unset"===t?t:(m(`Invalid CSS value "${e}", using fallback "${l}".`),l)}function b(e,l){return"number"==typeof e&&isFinite(e)?e:l}function g(e){if(!e||"object"!=typeof e)return{};const{overlayColor:l,overlayOpacity:t,overlayOpacityHover:o,overlayHeight:n,overlayHeightHover:s,transitionDuration:a,transitionEasing:i,contentAnimationDelay:r,minHeight:c,focalPoint:h,aspectRatio:g}=e;let _="#000000";l&&u.test(l)?_=l:l&&m(`Invalid color format "${l}", using fallback "#000000".`);const k=function(e){const l={r:0,g:0,b:0};if(!e||"string"!=typeof e)return l;const t=e.match(/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)/);if(t)return{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)};const o=e.replace("#","");return/^[0-9A-Fa-f]{3}$|^[0-9A-Fa-f]{6}$/.test(o)?3===o.length?{r:parseInt(o[0]+o[0],16),g:parseInt(o[1]+o[1],16),b:parseInt(o[2]+o[2],16)}:{r:parseInt(o.substring(0,2),16),g:parseInt(o.substring(2,4),16),b:parseInt(o.substring(4,6),16)}:l}(_),y=`${k.r}, ${k.g}, ${k.b}`,f=b(t,60)/100,x=b(o,80)/100,j=b(a,400),w=b(r,100);let C="ease-in-out";p.includes(i)?C=i:i&&m(`Invalid easing "${i}", using fallback "ease-in-out".`);const H=b(h?.x,.5),T=b(h?.y,.5),S={"--poster-overlay-color":_,"--poster-overlay-color-rgb":y,"--poster-overlay-opacity":f,"--poster-overlay-opacity-hover":x,"--poster-overlay-height":v(n,"30%"),"--poster-overlay-height-hover":v(s,"100%"),"--poster-transition-duration":`${j}ms`,"--poster-transition-easing":C,"--poster-content-delay":`${w}ms`,"--poster-min-height":v(c,"400px"),"--poster-focal-x":100*H+"%","--poster-focal-y":100*T+"%"};return g&&d.test(g)&&(S["--poster-aspect-ratio"]=g),S}(0,l.__)("Title…","shm-blocks"),(0,l.__)("Title…","shm-blocks"),(0,l.__)("Summary text…","shm-blocks");const _=[{label:(0,l.__)("Slide","shm-blocks"),value:"slide"},{label:(0,l.__)("Fade","shm-blocks"),value:"fade"},{label:(0,l.__)("Scale","shm-blocks"),value:"scale"},{label:(0,l.__)("Blur","shm-blocks"),value:"blur"},{label:(0,l.__)("Slide & Fade","shm-blocks"),value:"slide-fade"}],k=[{label:(0,l.__)("Fade Up","shm-blocks"),value:"fade-up"},{label:(0,l.__)("Fade","shm-blocks"),value:"fade"},{label:(0,l.__)("Scale","shm-blocks"),value:"scale"},{label:(0,l.__)("Stagger","shm-blocks"),value:"stagger"}],y=[{label:(0,l.__)("Ease","shm-blocks"),value:"ease"},{label:(0,l.__)("Ease In","shm-blocks"),value:"ease-in"},{label:(0,l.__)("Ease Out","shm-blocks"),value:"ease-out"},{label:(0,l.__)("Ease In Out","shm-blocks"),value:"ease-in-out"},{label:(0,l.__)("Linear","shm-blocks"),value:"linear"}],f=[{label:(0,l.__)("Bottom","shm-blocks"),value:"bottom"},{label:(0,l.__)("Top","shm-blocks"),value:"top"}],x=[{label:(0,l.__)("None","shm-blocks"),value:""},{label:"16:9",value:"16/9"},{label:"4:3",value:"4/3"},{label:"1:1",value:"1/1"},{label:"3:4",value:"3/4"},{label:"9:16",value:"9/16"}],j=[["shm/poster-content-default",{}],["shm/poster-content-hover",{}]],w=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"shm/poster","version":"1.0.0","title":"Poster","category":"shm-blocks","description":"An interactive poster block with a background image and hover-triggered overlay animations.","keywords":["poster","cover","hover","card","image"],"textdomain":"shm-blocks","attributes":{"mediaId":{"type":"number"},"mediaUrl":{"type":"string"},"focalPoint":{"type":"object","default":{"x":0.5,"y":0.5}},"imageAlt":{"type":"string","default":""},"linkUrl":{"type":"string","default":""},"linkTarget":{"type":"string","default":"_self"},"linkRel":{"type":"string","default":""},"overlayColor":{"type":"string","default":"#000000"},"overlayPosition":{"type":"string","default":"bottom","enum":["bottom","top"]},"overlayOpacity":{"type":"number","default":60},"overlayOpacityHover":{"type":"number","default":80},"overlayHeight":{"type":"string","default":"30%"},"overlayHeightHover":{"type":"string","default":"100%"},"animationType":{"type":"string","default":"slide","enum":["slide","fade","scale","blur","slide-fade"]},"contentAnimationType":{"type":"string","default":"fade-up","enum":["fade-up","fade","scale","stagger"]},"transitionDuration":{"type":"number","default":400},"contentAnimationDelay":{"type":"number","default":100},"transitionEasing":{"type":"string","default":"ease-in-out","enum":["ease","ease-in","ease-out","ease-in-out","linear"]},"minHeight":{"type":"string","default":"400px"},"aspectRatio":{"type":"string"}},"supports":{"html":false,"align":["wide","full"],"spacing":{"margin":true}},"editorScript":"file:./index.js","editorStyle":"file:./editor.css","style":"file:./style.css","viewScript":"file:./view.js"}'),C=(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:(0,a.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zm-7-2h5v-2h-5v2zm-5-4h10v-2H7v2zm0-4h10V7H7v2z"})});(0,e.registerBlockType)(w.name,{...w,icon:C,edit:function({attributes:e,setAttributes:s}){const{mediaId:c,mediaUrl:m,focalPoint:h,imageAlt:p,linkUrl:d,linkTarget:u,overlayPosition:v,animationType:b,contentAnimationType:w}=e,[C,H]=(0,n.useState)(!1),[T,S]=(0,n.useState)(!1),[O,A]=(0,n.useState)("default"),B=(0,n.useRef)(null),I="default"===O,P=g(e),$=["wp-block-shm-poster",`wp-block-shm-poster--animation-${b}`,`wp-block-shm-poster--content-${w}`,`wp-block-shm-poster--position-${v}`,I?"is-editing-default":"is-editing-hover",T&&"is-previewing-hover"].filter(Boolean).join(" "),R=(0,t.useBlockProps)({className:$,style:P});function U(e){s(e?.url?{mediaId:e.id,mediaUrl:e.url,imageAlt:e.alt||""}:{mediaId:void 0,mediaUrl:void 0})}function E(){s({mediaId:void 0,mediaUrl:void 0})}return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(t.BlockControls,{children:[(0,a.jsxs)(o.ToolbarGroup,{children:[(0,a.jsx)(o.ToolbarButton,{icon:I?"visibility":"hidden",label:I?(0,l.__)("Editing Default State","shm-blocks"):(0,l.__)("Editing Hover State","shm-blocks"),onClick:function(){A("default"===O?"hover":"default")},isPressed:!I,children:I?(0,l.__)("Default","shm-blocks"):(0,l.__)("Hover","shm-blocks")}),(0,a.jsx)(o.ToolbarButton,{icon:"controls-play",label:(0,l.__)("Preview Hover State","shm-blocks"),onClick:()=>S(!T),isPressed:T})]}),(0,a.jsxs)(o.ToolbarGroup,{children:[(0,a.jsx)(t.MediaUploadCheck,{children:(0,a.jsx)(t.MediaUpload,{onSelect:U,allowedTypes:["image"],value:c,render:({open:e})=>(0,a.jsx)(o.ToolbarButton,{icon:i,label:(0,l.__)("Edit Image","shm-blocks"),onClick:e})})}),(0,a.jsx)(o.ToolbarButton,{ref:B,icon:r,label:(0,l.__)("Edit Link","shm-blocks"),onClick:()=>H(!C),isPressed:C||!!d}),C&&(0,a.jsx)(o.Popover,{position:"bottom center",onClose:()=>H(!1),anchor:B.current,focusOnMount:"firstElement",children:(0,a.jsx)("div",{style:{padding:"16px",minWidth:"300px"},children:(0,a.jsx)(t.__experimentalLinkControl,{value:{url:d,opensInNewTab:"_blank"===u},onChange:function(e){const l=e?.opensInNewTab;s({linkUrl:e?.url||"",linkTarget:l?"_blank":"_self",linkRel:l?"noopener noreferrer":""})},onRemove:function(){s({linkUrl:"",linkTarget:"_self",linkRel:""})}})})})]})]}),(0,a.jsxs)(t.InspectorControls,{children:[(0,a.jsxs)(o.PanelBody,{title:(0,l.__)("Image Settings","shm-blocks"),initialOpen:!0,children:[(0,a.jsx)(t.MediaUploadCheck,{children:(0,a.jsx)(t.MediaUpload,{onSelect:U,allowedTypes:["image"],value:c,render:({open:e})=>(0,a.jsx)("div",{className:"shm-poster-image-control",children:m?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{src:m,alt:p||"",style:{maxWidth:"100%",marginBottom:"8px"}}),(0,a.jsx)(o.Button,{variant:"secondary",onClick:e,style:{marginRight:"8px"},children:(0,l.__)("Replace Image","shm-blocks")}),(0,a.jsx)(o.Button,{variant:"tertiary",isDestructive:!0,onClick:E,children:(0,l.__)("Remove","shm-blocks")})]}):(0,a.jsx)(o.Button,{variant:"primary",onClick:e,children:(0,l.__)("Select Image","shm-blocks")})})})}),m&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.FocalPointPicker,{label:(0,l.__)("Focal Point","shm-blocks"),url:m,value:h,onChange:e=>s({focalPoint:e})}),(0,a.jsx)(o.TextControl,{label:(0,l.__)("Alt Text","shm-blocks"),value:p,onChange:e=>s({imageAlt:e}),help:(0,l.__)("Describe the image for accessibility.","shm-blocks")})]})]}),(0,a.jsxs)(o.PanelBody,{title:(0,l.__)("Link Settings","shm-blocks"),initialOpen:!1,children:[(0,a.jsx)(o.TextControl,{label:(0,l.__)("URL","shm-blocks"),value:d,onChange:e=>s({linkUrl:e}),placeholder:"https://"}),(0,a.jsx)(o.ToggleControl,{label:(0,l.__)("Open in new tab","shm-blocks"),checked:"_blank"===u,onChange:e=>s({linkTarget:e?"_blank":"_self",linkRel:e?"noopener noreferrer":""})})]}),(0,a.jsxs)(o.PanelBody,{title:(0,l.__)("Overlay Settings","shm-blocks"),initialOpen:!1,children:[(0,a.jsx)("p",{children:(0,l.__)("Overlay Color","shm-blocks")}),(0,a.jsx)(o.ColorPicker,{color:e.overlayColor,onChange:e=>s({overlayColor:e}),enableAlpha:!1}),(0,a.jsx)(o.SelectControl,{label:(0,l.__)("Overlay Position","shm-blocks"),value:v,options:f,onChange:e=>s({overlayPosition:e})}),(0,a.jsx)(o.RangeControl,{label:(0,l.__)("Default Opacity (%)","shm-blocks"),value:e.overlayOpacity,onChange:e=>s({overlayOpacity:e}),min:0,max:100}),(0,a.jsx)(o.RangeControl,{label:(0,l.__)("Hover Opacity (%)","shm-blocks"),value:e.overlayOpacityHover,onChange:e=>s({overlayOpacityHover:e}),min:0,max:100}),(0,a.jsx)(o.TextControl,{label:(0,l.__)("Default Height","shm-blocks"),value:e.overlayHeight,onChange:e=>s({overlayHeight:e}),help:(0,l.__)("E.g., 30%, 150px, 10rem","shm-blocks")}),(0,a.jsx)(o.TextControl,{label:(0,l.__)("Hover Height","shm-blocks"),value:e.overlayHeightHover,onChange:e=>s({overlayHeightHover:e}),help:(0,l.__)("E.g., 100%, 300px","shm-blocks")})]}),(0,a.jsxs)(o.PanelBody,{title:(0,l.__)("Animation Settings","shm-blocks"),initialOpen:!1,children:[(0,a.jsx)(o.SelectControl,{label:(0,l.__)("Overlay Animation","shm-blocks"),value:b,options:_,onChange:e=>s({animationType:e}),help:(0,l.__)("Animation style for the overlay panel.","shm-blocks")}),(0,a.jsx)(o.SelectControl,{label:(0,l.__)("Content Animation","shm-blocks"),value:w,options:k,onChange:e=>s({contentAnimationType:e}),help:(0,l.__)("Animation style for content elements.","shm-blocks")}),(0,a.jsx)(o.RangeControl,{label:(0,l.__)("Transition Duration (ms)","shm-blocks"),value:e.transitionDuration,onChange:e=>s({transitionDuration:e}),min:100,max:1e3,step:50}),(0,a.jsx)(o.RangeControl,{label:(0,l.__)("Content Animation Delay (ms)","shm-blocks"),value:e.contentAnimationDelay,onChange:e=>s({contentAnimationDelay:e}),min:0,max:500,step:25}),(0,a.jsx)(o.SelectControl,{label:(0,l.__)("Easing Function","shm-blocks"),value:e.transitionEasing,options:y,onChange:e=>s({transitionEasing:e})})]}),(0,a.jsxs)(o.PanelBody,{title:(0,l.__)("Dimensions","shm-blocks"),initialOpen:!1,children:[(0,a.jsx)(o.TextControl,{label:(0,l.__)("Minimum Height","shm-blocks"),value:e.minHeight,onChange:e=>s({minHeight:e}),help:(0,l.__)("E.g., 400px, 50vh","shm-blocks")}),(0,a.jsx)(o.SelectControl,{label:(0,l.__)("Aspect Ratio","shm-blocks"),value:e.aspectRatio||"",options:x,onChange:e=>s({aspectRatio:e||void 0})})]})]}),(0,a.jsxs)("div",{...R,children:[m?(0,a.jsx)("img",{className:"shm-poster__image",src:m,alt:p||""}):(0,a.jsx)("div",{className:"shm-poster__placeholder",children:(0,a.jsx)(t.MediaUploadCheck,{children:(0,a.jsx)(t.MediaUpload,{onSelect:U,allowedTypes:["image"],value:c,render:({open:e})=>(0,a.jsx)(o.Button,{variant:"primary",onClick:e,icon:i,children:(0,l.__)("Select Background Image","shm-blocks")})})})}),(0,a.jsx)("div",{className:"shm-poster__overlay shm-poster__overlay--default",children:(0,a.jsx)(t.InnerBlocks,{template:j,templateLock:"all",allowedBlocks:["shm/poster-content-default","shm/poster-content-hover"]})})]})]})},save:function({attributes:e}){const{mediaUrl:l,imageAlt:o,linkUrl:n,linkTarget:s,linkRel:i,overlayPosition:r,animationType:c,contentAnimationType:m}=e,h=g(e),p=[`wp-block-shm-poster--animation-${c}`,`wp-block-shm-poster--content-${m}`,`wp-block-shm-poster--position-${r}`].join(" "),d=t.useBlockProps.save({className:p,style:h}),u=(0,a.jsx)("span",{className:"shm-poster__overlays",children:(0,a.jsx)(t.InnerBlocks.Content,{})});return(0,a.jsxs)("div",{...d,children:[l&&(0,a.jsx)("img",{className:"shm-poster__image",src:l,alt:o||"",loading:"lazy"}),(()=>{if(n){const e={className:"shm-poster__link",href:n};return"_blank"===s&&(e.target="_blank",e.rel=i||"noopener noreferrer"),(0,a.jsx)("a",{...e,children:u})}return(0,a.jsx)("div",{className:"shm-poster__link","data-no-link":"true",children:u})})()]})}})}},t={};function o(e){var n=t[e];if(void 0!==n)return n.exports;var s=t[e]={exports:{}};return l[e](s,s.exports,o),s.exports}o.m=l,e=[],o.O=(l,t,n,s)=>{if(!t){var a=1/0;for(m=0;m<e.length;m++){for(var[t,n,s]=e[m],i=!0,r=0;r<t.length;r++)(!1&s||a>=s)&&Object.keys(o.O).every(e=>o.O[e](t[r]))?t.splice(r--,1):(i=!1,s<a&&(a=s));if(i){e.splice(m--,1);var c=n();void 0!==c&&(l=c)}}return l}s=s||0;for(var m=e.length;m>0&&e[m-1][2]>s;m--)e[m]=e[m-1];e[m]=[t,n,s]},o.o=(e,l)=>Object.prototype.hasOwnProperty.call(e,l),(()=>{var e={378:0,518:0};o.O.j=l=>0===e[l];var l=(l,t)=>{var n,s,[a,i,r]=t,c=0;if(a.some(l=>0!==e[l])){for(n in i)o.o(i,n)&&(o.m[n]=i[n]);if(r)var m=r(o)}for(l&&l(t);c<a.length;c++)s=a[c],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(m)},t=globalThis.webpackChunkshm_blocks=globalThis.webpackChunkshm_blocks||[];t.forEach(l.bind(null,0)),t.push=l.bind(null,t.push.bind(t))})();var n=o.O(void 0,[518],()=>o(62));n=o.O(n)})();