(()=>{"use strict";var e,o={62(){const e=window.wp.blocks,o=window.wp.i18n,l=window.wp.blockEditor,t=window.wp.components,s=window.wp.element,n=window.wp.primitives,a=window.ReactJSXRuntime;var i=(0,a.jsx)(n.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)(n.Path,{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5 4.5h14c.3 0 .5.2.5.5v8.4l-3-2.9c-.3-.3-.8-.3-1 0L11.9 14 9 12c-.3-.2-.6-.2-.8 0l-3.6 2.6V5c-.1-.3.1-.5.4-.5zm14 15H5c-.3 0-.5-.2-.5-.5v-2.4l4.1-3 3 1.9c.3.2.7.2.9-.1L16 12l3.5 3.4V19c0 .3-.2.5-.5.5z"})}),r=(0,a.jsx)(n.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,a.jsx)(n.Path,{d:"M10 17.389H8.444A5.194 5.194 0 1 1 8.444 7H10v1.5H8.444a3.694 3.694 0 0 0 0 7.389H10v1.5ZM14 7h1.556a5.194 5.194 0 0 1 0 10.39H14v-1.5h1.556a3.694 3.694 0 0 0 0-7.39H14V7Zm-4.5 6h5v-1.5h-5V13Z"})});const c="undefined"!=typeof process&&!1;function h(e){c&&console.warn(`[SHM Blocks] ${e}`)}const p=/^-?[\d.]+(%|px|em|rem|vh|vw|vmin|vmax|ch|ex)$/,m=["ease","ease-in","ease-out","ease-in-out","linear"],d=/^\d+\/\d+$/,v=/^#[0-9A-Fa-f]{3}$|^#[0-9A-Fa-f]{6}$|^rgba?\(\s*\d+\s*,\s*\d+\s*,\s*\d+/;function u(e,o){if(!e||"string"!=typeof e)return o;const l=e.trim();return p.test(l)||"auto"===l||"unset"===l?l:(h(`Invalid CSS value "${e}", using fallback "${o}".`),o)}function b(e,o){return"number"==typeof e&&isFinite(e)?e:o}function g(e){if(!e||"object"!=typeof e)return{};const{overlayColor:o,overlayOpacity:l,overlayOpacityHover:t,overlayHeight:s,overlayHeightHover:n,transitionDuration:a,transitionEasing:i,contentAnimationDelay:r,minHeight:c,focalPoint:p,aspectRatio:g}=e;let _="#000000";o&&v.test(o)?_=o:o&&h(`Invalid color format "${o}", using fallback "#000000".`);const k=function(e){const o={r:0,g:0,b:0};if(!e||"string"!=typeof e)return o;const l=e.match(/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)/);if(l)return{r:parseInt(l[1],10),g:parseInt(l[2],10),b:parseInt(l[3],10)};const t=e.replace("#","");return/^[0-9A-Fa-f]{3}$|^[0-9A-Fa-f]{6}$/.test(t)?3===t.length?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16)}:{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16)}:o}(_),y=`${k.r}, ${k.g}, ${k.b}`,x=b(l,60)/100,f=b(t,80)/100,j=b(a,400),w=b(r,100);let C="ease-in-out";m.includes(i)?C=i:i&&h(`Invalid easing "${i}", using fallback "ease-in-out".`);const H=b(p?.x,.5),O=b(p?.y,.5),P={"--poster-overlay-color":_,"--poster-overlay-color-rgb":y,"--poster-overlay-opacity":x,"--poster-overlay-opacity-hover":f,"--poster-overlay-height":u(s,"30%"),"--poster-overlay-height-hover":u(n,"100%"),"--poster-transition-duration":`${j}ms`,"--poster-transition-easing":C,"--poster-content-delay":`${w}ms`,"--poster-min-height":u(c,"400px"),"--poster-focal-x":100*H+"%","--poster-focal-y":100*O+"%"};return g&&d.test(g)&&(P["--poster-aspect-ratio"]=g),P}const _=[{label:(0,o.__)("Slide","shm-blocks"),value:"slide"},{label:(0,o.__)("Fade","shm-blocks"),value:"fade"},{label:(0,o.__)("Scale","shm-blocks"),value:"scale"},{label:(0,o.__)("Blur","shm-blocks"),value:"blur"},{label:(0,o.__)("Slide & Fade","shm-blocks"),value:"slide-fade"}],k=[{label:(0,o.__)("Ease","shm-blocks"),value:"ease"},{label:(0,o.__)("Ease In","shm-blocks"),value:"ease-in"},{label:(0,o.__)("Ease Out","shm-blocks"),value:"ease-out"},{label:(0,o.__)("Ease In Out","shm-blocks"),value:"ease-in-out"},{label:(0,o.__)("Linear","shm-blocks"),value:"linear"}],y=[{label:(0,o.__)("Bottom","shm-blocks"),value:"bottom"},{label:(0,o.__)("Top","shm-blocks"),value:"top"}],x=[{label:(0,o.__)("None","shm-blocks"),value:""},{label:"16:9",value:"16/9"},{label:"4:3",value:"4/3"},{label:"1:1",value:"1/1"},{label:"3:4",value:"3/4"},{label:"9:16",value:"9/16"}],f=["core/heading","core/paragraph","core/image","core/buttons","core/button","core/list","core/separator","core/spacer","core/group","shm/poster-hover-content"],j=[["core/heading",{level:3,placeholder:(0,o.__)("Title…","shm-blocks")}],["shm/poster-hover-content",{},[["core/paragraph",{placeholder:(0,o.__)("Description shown on hover…","shm-blocks")}]]]],w=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"shm/poster","version":"1.0.0","title":"Poster","category":"shm-blocks","description":"An interactive poster block with a background image and hover-triggered overlay animations.","keywords":["poster","cover","hover","card","image"],"textdomain":"shm-blocks","attributes":{"mediaId":{"type":"number"},"mediaUrl":{"type":"string"},"focalPoint":{"type":"object","default":{"x":0.5,"y":0.5}},"imageAlt":{"type":"string","default":""},"linkUrl":{"type":"string","default":""},"linkTarget":{"type":"string","default":"_self"},"linkRel":{"type":"string","default":""},"overlayColor":{"type":"string","default":"#000000"},"overlayPosition":{"type":"string","default":"bottom","enum":["bottom","top"]},"overlayOpacity":{"type":"number","default":60},"overlayOpacityHover":{"type":"number","default":80},"overlayHeight":{"type":"string","default":"30%"},"overlayHeightHover":{"type":"string","default":"100%"},"animationType":{"type":"string","default":"slide","enum":["slide","fade","scale","blur","slide-fade"]},"transitionDuration":{"type":"number","default":400},"transitionEasing":{"type":"string","default":"ease-in-out","enum":["ease","ease-in","ease-out","ease-in-out","linear"]},"minHeight":{"type":"string","default":"400px"},"aspectRatio":{"type":"string"}},"supports":{"html":false,"align":["wide","full"],"spacing":{"margin":true}},"editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css","viewScript":"file:./view.js"}'),C=(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:(0,a.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zm-7-2h5v-2h-5v2zm-5-4h10v-2H7v2zm0-4h10V7H7v2z"})});(0,e.registerBlockType)(w.name,{...w,icon:C,edit:function({attributes:e,setAttributes:n}){var c,h;const{mediaId:p,mediaUrl:m,focalPoint:d,imageAlt:v,linkUrl:u,linkTarget:b,overlayPosition:w,animationType:C}=e,[H,O]=(0,s.useState)(!1),[P,T]=(0,s.useState)(!1),B=(0,s.useRef)(null),I=g(e),S=["wp-block-shm-poster",`wp-block-shm-poster--animation-${C}`,`wp-block-shm-poster--position-${w}`,P&&"is-previewing-hover"].filter(Boolean).join(" "),$=(0,l.useBlockProps)({className:S,style:I});function R(e){n(e?.url?{mediaId:e.id,mediaUrl:e.url,imageAlt:e.alt||""}:{mediaId:void 0,mediaUrl:void 0})}function A(){n({mediaId:void 0,mediaUrl:void 0})}return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l.BlockControls,{children:[(0,a.jsx)(t.ToolbarGroup,{children:(0,a.jsx)(t.ToolbarButton,{icon:"controls-play",label:(0,o.__)("Preview Hover State","shm-blocks"),onClick:()=>T(!P),isPressed:P,children:P?(0,o.__)("Previewing","shm-blocks"):(0,o.__)("Preview","shm-blocks")})}),(0,a.jsxs)(t.ToolbarGroup,{children:[(0,a.jsx)(l.MediaUploadCheck,{children:(0,a.jsx)(l.MediaUpload,{onSelect:R,allowedTypes:["image"],value:p,render:({open:e})=>(0,a.jsx)(t.ToolbarButton,{icon:i,label:(0,o.__)("Edit Image","shm-blocks"),onClick:e})})}),(0,a.jsx)(t.ToolbarButton,{ref:B,icon:r,label:(0,o.__)("Edit Link","shm-blocks"),onClick:()=>O(!H),isPressed:H||!!u}),H&&(0,a.jsx)(t.Popover,{position:"bottom center",onClose:()=>O(!1),anchor:B.current,focusOnMount:"firstElement",children:(0,a.jsx)("div",{style:{padding:"16px",minWidth:"300px"},children:(0,a.jsx)(l.__experimentalLinkControl,{value:{url:u,opensInNewTab:"_blank"===b},onChange:function(e){const o=e?.opensInNewTab;n({linkUrl:e?.url||"",linkTarget:o?"_blank":"_self",linkRel:o?"noopener noreferrer":""})},onRemove:function(){n({linkUrl:"",linkTarget:"_self",linkRel:""})}})})})]})]}),(0,a.jsxs)(l.InspectorControls,{children:[(0,a.jsxs)(t.PanelBody,{title:(0,o.__)("Image Settings","shm-blocks"),initialOpen:!0,children:[(0,a.jsx)(l.MediaUploadCheck,{children:(0,a.jsx)(l.MediaUpload,{onSelect:R,allowedTypes:["image"],value:p,render:({open:e})=>(0,a.jsx)("div",{className:"shm-poster-image-control",children:m?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{src:m,alt:v||"",style:{maxWidth:"100%",marginBottom:"8px"}}),(0,a.jsx)(t.Button,{variant:"secondary",onClick:e,style:{marginRight:"8px"},children:(0,o.__)("Replace Image","shm-blocks")}),(0,a.jsx)(t.Button,{variant:"tertiary",isDestructive:!0,onClick:A,children:(0,o.__)("Remove","shm-blocks")})]}):(0,a.jsx)(t.Button,{variant:"primary",onClick:e,children:(0,o.__)("Select Image","shm-blocks")})})})}),m&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.FocalPointPicker,{label:(0,o.__)("Focal Point","shm-blocks"),url:m,value:d,onChange:e=>n({focalPoint:e})}),(0,a.jsx)(t.TextControl,{label:(0,o.__)("Alt Text","shm-blocks"),value:v,onChange:e=>n({imageAlt:e}),help:(0,o.__)("Describe the image for accessibility.","shm-blocks")})]})]}),(0,a.jsxs)(t.PanelBody,{title:(0,o.__)("Link Settings","shm-blocks"),initialOpen:!1,children:[(0,a.jsx)(t.TextControl,{label:(0,o.__)("URL","shm-blocks"),value:u,onChange:e=>n({linkUrl:e}),placeholder:"https://"}),(0,a.jsx)(t.ToggleControl,{label:(0,o.__)("Open in new tab","shm-blocks"),checked:"_blank"===b,onChange:e=>n({linkTarget:e?"_blank":"_self",linkRel:e?"noopener noreferrer":""})})]}),(0,a.jsxs)(t.PanelBody,{title:(0,o.__)("Overlay Settings","shm-blocks"),initialOpen:!1,children:[(0,a.jsx)("p",{children:(0,o.__)("Overlay Color","shm-blocks")}),(0,a.jsx)(t.ColorPicker,{color:e.overlayColor,onChange:e=>n({overlayColor:e}),enableAlpha:!1}),(0,a.jsx)(t.SelectControl,{label:(0,o.__)("Overlay Position","shm-blocks"),value:w,options:y,onChange:e=>n({overlayPosition:e})}),(0,a.jsx)(t.RangeControl,{label:(0,o.__)("Default Opacity (%)","shm-blocks"),value:e.overlayOpacity,onChange:e=>n({overlayOpacity:e}),min:0,max:100}),(0,a.jsx)(t.RangeControl,{label:(0,o.__)("Hover Opacity (%)","shm-blocks"),value:e.overlayOpacityHover,onChange:e=>n({overlayOpacityHover:e}),min:0,max:100}),(0,a.jsx)(t.TextControl,{label:(0,o.__)("Default Height","shm-blocks"),value:e.overlayHeight,onChange:e=>n({overlayHeight:e}),help:(0,o.__)("E.g., 30%, 150px, 10rem","shm-blocks")}),(0,a.jsx)(t.TextControl,{label:(0,o.__)("Hover Height","shm-blocks"),value:e.overlayHeightHover,onChange:e=>n({overlayHeightHover:e}),help:(0,o.__)("E.g., 100%, 300px","shm-blocks")})]}),(0,a.jsxs)(t.PanelBody,{title:(0,o.__)("Animation Settings","shm-blocks"),initialOpen:!1,children:[(0,a.jsx)(t.SelectControl,{label:(0,o.__)("Overlay Animation","shm-blocks"),value:C,options:_,onChange:e=>n({animationType:e}),help:(0,o.__)("Animation style for the overlay panel.","shm-blocks")}),(0,a.jsx)(t.RangeControl,{label:(0,o.__)("Transition Duration (ms)","shm-blocks"),value:e.transitionDuration,onChange:e=>n({transitionDuration:e}),min:100,max:1e3,step:50}),(0,a.jsx)(t.SelectControl,{label:(0,o.__)("Easing Function","shm-blocks"),value:e.transitionEasing,options:k,onChange:e=>n({transitionEasing:e})})]}),(0,a.jsxs)(t.PanelBody,{title:(0,o.__)("Dimensions","shm-blocks"),initialOpen:!1,children:[(0,a.jsx)(t.TextControl,{label:(0,o.__)("Minimum Height","shm-blocks"),value:e.minHeight,onChange:e=>n({minHeight:e}),help:(0,o.__)("E.g., 400px, 50vh","shm-blocks")}),(0,a.jsx)(t.SelectControl,{label:(0,o.__)("Aspect Ratio","shm-blocks"),value:e.aspectRatio||"",options:x,onChange:e=>n({aspectRatio:e||void 0})})]})]}),(0,a.jsxs)("div",{...$,children:[m?(0,a.jsx)("img",{className:"shm-poster__image",src:m,alt:v||"",style:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:"cover",objectPosition:`${100*(null!==(c=d?.x)&&void 0!==c?c:.5)}% ${100*(null!==(h=d?.y)&&void 0!==h?h:.5)}%`}}):(0,a.jsx)("div",{className:"shm-poster__placeholder",children:(0,a.jsx)(l.MediaUploadCheck,{children:(0,a.jsx)(l.MediaUpload,{onSelect:R,allowedTypes:["image"],value:p,render:({open:e})=>(0,a.jsx)(t.Button,{variant:"primary",onClick:e,icon:i,children:(0,o.__)("Select Background Image","shm-blocks")})})})}),(0,a.jsx)("div",{className:"shm-poster__overlay",children:(0,a.jsx)(l.InnerBlocks,{allowedBlocks:f,template:j,templateLock:!1})})]})]})},save:function({attributes:e}){var o,t;const{mediaUrl:s,imageAlt:n,linkUrl:i,linkTarget:r,linkRel:c,overlayPosition:h,animationType:p,focalPoint:m}=e,d=g(e),v=[`wp-block-shm-poster--animation-${p}`,`wp-block-shm-poster--position-${h}`].filter(Boolean).join(" "),u=l.useBlockProps.save({className:v,style:d}),b=(0,a.jsx)("span",{className:"shm-poster__overlay",children:(0,a.jsx)(l.InnerBlocks.Content,{})}),_={position:"absolute",inset:0,width:"100%",height:"100%",objectFit:"cover",objectPosition:`${100*(null!==(o=m?.x)&&void 0!==o?o:.5)}% ${100*(null!==(t=m?.y)&&void 0!==t?t:.5)}%`};return(0,a.jsxs)("div",{...u,children:[s&&(0,a.jsx)("img",{className:"shm-poster__image",src:s,alt:n||"",loading:"lazy",style:_}),(()=>{if(i){const e={className:"shm-poster__link",href:i};return"_blank"===r&&(e.target="_blank",e.rel=c||"noopener noreferrer"),(0,a.jsx)("a",{...e,children:b})}return(0,a.jsx)("div",{className:"shm-poster__link","data-no-link":"true",children:b})})()]})}})}},l={};function t(e){var s=l[e];if(void 0!==s)return s.exports;var n=l[e]={exports:{}};return o[e](n,n.exports,t),n.exports}t.m=o,e=[],t.O=(o,l,s,n)=>{if(!l){var a=1/0;for(h=0;h<e.length;h++){for(var[l,s,n]=e[h],i=!0,r=0;r<l.length;r++)(!1&n||a>=n)&&Object.keys(t.O).every(e=>t.O[e](l[r]))?l.splice(r--,1):(i=!1,n<a&&(a=n));if(i){e.splice(h--,1);var c=s();void 0!==c&&(o=c)}}return o}n=n||0;for(var h=e.length;h>0&&e[h-1][2]>n;h--)e[h]=e[h-1];e[h]=[l,s,n]},t.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),(()=>{var e={378:0,518:0};t.O.j=o=>0===e[o];var o=(o,l)=>{var s,n,[a,i,r]=l,c=0;if(a.some(o=>0!==e[o])){for(s in i)t.o(i,s)&&(t.m[s]=i[s]);if(r)var h=r(t)}for(o&&o(l);c<a.length;c++)n=a[c],t.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return t.O(h)},l=globalThis.webpackChunkshm_blocks=globalThis.webpackChunkshm_blocks||[];l.forEach(o.bind(null,0)),l.push=o.bind(null,l.push.bind(l))})();var s=t.O(void 0,[518],()=>t(62));s=t.O(s)})();